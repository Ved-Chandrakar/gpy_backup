<%- include('../partials/header') %>

<div class="container-fluid py-4">
    <!-- Page Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="h2 mb-0">
                        <i class="fas fa-baby text-primary me-2"></i>
                        ‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£
                    </h1>
                    <p class="text-muted"><%= child.child_name || child.mother_name + ' ‡§ï‡§æ ‡§¨‡§ö‡•ç‡§ö‡§æ' %></p>
                </div>
                <div>
                    <a href="/admin/children" class="btn btn-secondary me-2">
                        <i class="fas fa-arrow-left me-1"></i>
                        ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç
                    </a>
                    <a href="/admin/children/<%= child.id %>/edit" class="btn btn-warning">
                        <i class="fas fa-edit me-1"></i>
                        ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Basic Information -->
        <div class="col-lg-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡§æ ‡§®‡§æ‡§Æ:</strong></div>
                        <div class="col-sm-8"><%= child.child_name || '‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß' %></div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§Æ‡§æ‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ:</strong></div>
                        <div class="col-sm-8"><%= child.mother_name %></div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§™‡§ø‡§§‡§æ/‡§™‡§§‡§ø ‡§ï‡§æ ‡§®‡§æ‡§Æ:</strong></div>
                        <div class="col-sm-8"><%= child.father_husband_name || '‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß' %></div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§Æ‡§æ‡§§‡§æ ‡§ï‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤:</strong></div>
                        <div class="col-sm-8"><%= child.mother_mobile || '‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß' %></div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§Æ‡§æ‡§§‡§æ ‡§ï‡§æ ‡§Ü‡§ß‡§æ‡§∞:</strong></div>
                        <div class="col-sm-8"><%= child.mother_aadhar || '‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß' %></div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§≤‡§ø‡§Ç‡§ó:</strong></div>
                        <div class="col-sm-8">
                            <span class="badge bg-<%= child.gender === 'male' ? 'primary' : 'success' %>">
                                <%= child.gender === 'male' ? '‡§™‡•Å‡§§‡•ç‡§∞' : '‡§™‡•Å‡§§‡•ç‡§∞‡•Ä' %>
                            </span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø:</strong></div>
                        <div class="col-sm-8"><%= new Date(child.dob).toLocaleDateString('hi-IN') %></div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§™‡•ç‡§∞‡§∏‡§µ ‡§ï‡§æ ‡§∏‡§Æ‡§Ø:</strong></div>
                        <div class="col-sm-8"><%= child.delivery_time || '‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß' %></div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§ú‡§®‡•ç‡§Æ ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§µ‡§ú‡§®:</strong></div>
                        <div class="col-sm-8"><%= child.weight_at_birth ? child.weight_at_birth + ' ‡§ï‡§ø‡§≤‡•ã' : '‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß' %></div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§∞‡§ï‡•ç‡§§ ‡§∏‡§Æ‡•Ç‡§π:</strong></div>
                        <div class="col-sm-8">
                            <% if (child.blood_group) { %>
                                <span class="badge bg-info"><%= child.blood_group %></span>
                            <% } else { %>
                                ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Birth & Medical Information -->
        <div class="col-lg-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">‡§™‡•ç‡§∞‡§∏‡§µ ‡§î‡§∞ ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡§æ ‡§ï‡•ç‡§∞‡§Æ:</strong></div>
                        <div class="col-sm-8">
                            <% if (child.child_order) { %>
                                <span class="badge bg-info">
                                    <% if (child.child_order === 'first') { %>
                                        ‡§™‡§π‡§≤‡§æ ‡§¨‡§ö‡•ç‡§ö‡§æ
                                    <% } else if (child.child_order === 'second') { %>
                                        ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§¨‡§ö‡•ç‡§ö‡§æ
                                    <% } else if (child.child_order === 'third') { %>
                                        ‡§§‡•Ä‡§∏‡§∞‡§æ ‡§¨‡§ö‡•ç‡§ö‡§æ
                                    <% } else if (child.child_order === 'fourth') { %>
                                        ‡§ö‡•å‡§•‡§æ ‡§¨‡§ö‡•ç‡§ö‡§æ
                                    <% } %>
                                </span>
                            <% } else { %>
                                ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                            <% } %>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§™‡•ç‡§∞‡§∏‡§µ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞:</strong></div>
                        <div class="col-sm-8">
                            <% if (child.delivery_type) { %>
                                <span class="badge bg-<%= child.delivery_type === 'normal' ? 'success' : child.delivery_type === 'cesarean' ? 'warning' : 'info' %>">
                                    <% if (child.delivery_type === 'normal') { %>
                                        ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§™‡•ç‡§∞‡§∏‡§µ
                                    <% } else if (child.delivery_type === 'cesarean') { %>
                                        ‡§∏‡§ø‡§ú‡•á‡§∞‡§ø‡§Ø‡§®
                                    <% } else if (child.delivery_type === 'assisted') { %>
                                        ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§™‡•ç‡§∞‡§∏‡§µ
                                    <% } %>
                                </span>
                            <% } else { %>
                                ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                            <% } %>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤:</strong></div>
                        <div class="col-sm-8">
                            <% if (child.hospital) { %>
                                <strong><%= child.hospital.hospital_name || child.hospital.name || '‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç' %></strong>
                                <% if (child.hospital.mobile) { %>
                                    <br><small class="text-muted">üìû <%= child.hospital.mobile %></small>
                                <% } %>
                            <% } else { %>
                                ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                            <% } %>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§Æ‡§ø‡§§‡§æ‡§®‡§ø‡§®:</strong></div>
                        <div class="col-sm-8">
                            <%= child.mitanin ? child.mitanin.name : '‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß' %>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§ú‡§®‡•ç‡§Æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞:</strong></div>
                        <div class="col-sm-8">
                            <% if (child.birth_certificate) { %>
                                <span class="badge bg-<%= child.birth_certificate === 'yes' ? 'success' : 'danger' %>">
                                    <%= child.birth_certificate === 'yes' ? '‡§π‡§æ‡§Ç' : '‡§®‡§π‡•Ä‡§Ç' %>
                                </span>
                            <% } else { %>
                                ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Location Information -->
    <div class="row">
        <div class="col-lg-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§ú‡§ø‡§≤‡§æ:</strong></div>
                        <div class="col-sm-8">
                            <%= child.district ? child.district.district_name : '‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß' %>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>‡§¨‡•ç‡§≤‡•â‡§ï:</strong></div>
                        <div class="col-sm-8">
                            <%= child.block ? child.block.block_name : '‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß' %>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Government Schemes -->
        <div class="col-lg-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-sm-6"><strong>‡§Æ‡•Å‡§ñ‡•ç‡§Ø‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§ú‡•Ä‡§µ‡§® ‡§ú‡§®‡§®‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ:</strong></div>
                        <div class="col-sm-6">
                            <% if (child.mmjy) { %>
                                <span class="badge bg-<%= child.mmjy === 'yes' ? 'success' : 'danger' %>">
                                    <%= child.mmjy === 'yes' ? '‡§π‡§æ‡§Ç' : '‡§®‡§π‡•Ä‡§Ç' %>
                                </span>
                            <% } else { %>
                                ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                            <% } %>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-6"><strong>‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§Æ‡§æ‡§§‡•É ‡§µ‡§Ç‡§¶‡§®‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ:</strong></div>
                        <div class="col-sm-6">
                            <% if (child.pmmvy) { %>
                                <span class="badge bg-<%= child.pmmvy === 'yes' ? 'success' : 'danger' %>">
                                    <%= child.pmmvy === 'yes' ? '‡§π‡§æ‡§Ç' : '‡§®‡§π‡•Ä‡§Ç' %>
                                </span>
                            <% } else { %>
                                ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                            <% } %>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-6"><strong>‡§∂‡•ç‡§∞‡§Æ‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§°:</strong></div>
                        <div class="col-sm-6">
                            <% if (child.is_shramik_card) { %>
                                <span class="badge bg-<%= child.is_shramik_card === 'yes' ? 'success' : 'danger' %>">
                                    <%= child.is_shramik_card === 'yes' ? '‡§π‡§æ‡§Ç' : '‡§®‡§π‡•Ä‡§Ç' %>
                                </span>
                            <% } else { %>
                                ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                            <% } %>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-6"><strong>‡§Ü‡§Ø‡•Å‡§∑‡•ç‡§Æ‡§æ‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó:</strong></div>
                        <div class="col-sm-6">
                            <% if (child.is_used_ayushman_card) { %>
                                <span class="badge bg-<%= child.is_used_ayushman_card === 'yes' ? 'success' : 'danger' %>">
                                    <%= child.is_used_ayushman_card === 'yes' ? '‡§π‡§æ‡§Ç' : '‡§®‡§π‡•Ä‡§Ç' %>
                                </span>
                            <% } else { %>
                                ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                            <% } %>
                        </div>
                    </div>
                    <% if (child.ayushman_card_amount) { %>
                        <div class="row mb-3">
                            <div class="col-sm-6"><strong>‡§Ü‡§Ø‡•Å‡§∑‡•ç‡§Æ‡§æ‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∞‡§æ‡§∂‡§ø:</strong></div>
                            <div class="col-sm-6">
                                <span class="badge bg-info">‚Çπ <%= child.ayushman_card_amount %></span>
                            </div>
                        </div>
                    <% } %>
                    <% if (child.gender === 'female') { %>
                        <div class="row mb-3">
                            <div class="col-sm-6"><strong>‡§®‡§®‡•ç‡§®‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ:</strong></div>
                            <div class="col-sm-6">
                                <% if (child.is_benefit_nsy) { %>
                                    <span class="badge bg-<%= child.is_benefit_nsy === 'yes' ? 'success' : 'danger' %>">
                                        <%= child.is_benefit_nsy === 'yes' ? '‡§π‡§æ‡§Ç' : '‡§®‡§π‡•Ä‡§Ç' %>
                                    </span>
                                <% } else { %>
                                    ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                                <% } %>
                            </div>
                        </div>
                        <% if (child.is_benefit_nsy === 'yes') { %>
                            <div class="row mb-3">
                                <div class="col-sm-6"><strong>NSY ‡§´‡•â‡§∞‡•ç‡§Æ ‡§Æ‡§ø‡§≤‡§æ:</strong></div>
                                <div class="col-sm-6">
                                    <% if (child.is_nsy_form) { %>
                                        <span class="badge bg-<%= child.is_nsy_form === 'yes' ? 'success' : 'danger' %>">
                                            <%= child.is_nsy_form === 'yes' ? '‡§π‡§æ‡§Ç' : '‡§®‡§π‡•Ä‡§Ç' %>
                                        </span>
                                    <% } else { %>
                                        ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                                    <% } %>
                                </div>
                            </div>
                        <% } %>
                    <% } %>
                </div>
            </div>
        </div>
    </div>

    <!-- Plant Information -->
    <% if (plantsWithDetails && plantsWithDetails.length > 0) { %>
        <div class="row">
            <div class="col-12">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">‡§™‡•å‡§ß‡•á ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>‡§™‡•å‡§ß‡•á ‡§ï‡§æ ‡§®‡§æ‡§Æ</th>
                                        <th>‡§™‡•ç‡§∞‡§ú‡§æ‡§§‡§ø</th>
                                        <th>‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ</th>
                                        <th>‡§∏‡•ç‡§•‡§ø‡§§‡§ø</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% plantsWithDetails.forEach(plantData => { %>
                                        <tr>
                                            <td>
                                                <strong><%= plantData.plant ? plantData.plant.name : '‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§™‡•å‡§ß‡§æ' %></strong>
                                                <% if (plantData.plant && plantData.plant.local_name) { %>
                                                    <br><small class="text-muted">(<%= plantData.plant.local_name %>)</small>
                                                <% } %>
                                            </td>
                                            <td><%= plantData.plant ? plantData.plant.species : '‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß' %></td>
                                            <td><%= plantData.quantity %></td>
                                            <td>
                                                <% if (plantData.status) { %>
                                                    <span class="badge bg-<%= plantData.status === 'good' ? 'success' : plantData.status === 'dead' ? 'danger' : 'warning' %>">
                                                        <%= plantData.status === 'good' ? '‡§Ö‡§ö‡•ç‡§õ‡§æ' : plantData.status === 'dead' ? '‡§Æ‡•É‡§§' : '‡§≤‡§Ç‡§¨‡§ø‡§§' %>
                                                    </span>
                                                <% } else { %>
                                                    ‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß
                                                <% } %>
                                            </td>
                                        </tr>
                                    <% }); %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <% } %>

    <!-- Status Information -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="text-center">
                                <span class="badge bg-<%= child.is_active ? 'success' : 'secondary' %> fs-6">
                                    <%= child.is_active ? '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø' : '‡§®‡§ø‡§∑‡•ç‡§ï‡•ç‡§∞‡§ø‡§Ø' %>
                                </span>
                                <div class="mt-1 text-muted small">‡§∏‡•ç‡§•‡§ø‡§§‡§ø</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center">
                                <strong><%= new Date(child.created_at).toLocaleDateString('hi-IN') %></strong>
                                <div class="mt-1 text-muted small">‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§§‡§ø‡§•‡§ø</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center">
                                <strong><%= new Date(child.updated_at).toLocaleDateString('hi-IN') %></strong>
                                <div class="mt-1 text-muted small">‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<%- include('../partials/footer') %>
